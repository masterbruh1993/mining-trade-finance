{"ast":null,"code":"/**\n * Performance Detection Utility\n * Detects device performance capabilities for UI optimization\n */\n\nclass PerformanceDetector {\n  constructor() {\n    this.isLowPerformance = null;\n    this.adminFallbackEnabled = this.getAdminFallbackSetting();\n  }\n\n  /**\n   * Get admin fallback setting from localStorage\n   */\n  getAdminFallbackSetting() {\n    try {\n      const setting = localStorage.getItem('admin_animation_fallback');\n      return setting === 'true';\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * Set admin fallback setting\n   */\n  setAdminFallbackSetting(enabled) {\n    try {\n      localStorage.setItem('admin_animation_fallback', enabled.toString());\n      this.adminFallbackEnabled = enabled;\n    } catch {\n      // Silently fail if localStorage is not available\n    }\n  }\n\n  /**\n   * Detect if device has low performance capabilities\n   */\n  detectLowPerformance() {\n    if (this.isLowPerformance !== null) {\n      return this.isLowPerformance;\n    }\n    let score = 0;\n    const factors = [];\n\n    // Check hardware concurrency (CPU cores)\n    if (navigator.hardwareConcurrency) {\n      if (navigator.hardwareConcurrency <= 2) {\n        score += 2;\n        factors.push('Low CPU cores');\n      } else if (navigator.hardwareConcurrency <= 4) {\n        score += 1;\n        factors.push('Medium CPU cores');\n      }\n    }\n\n    // Check device memory (if available)\n    if (navigator.deviceMemory) {\n      if (navigator.deviceMemory <= 2) {\n        score += 2;\n        factors.push('Low RAM');\n      } else if (navigator.deviceMemory <= 4) {\n        score += 1;\n        factors.push('Medium RAM');\n      }\n    }\n\n    // Check connection speed\n    if (navigator.connection) {\n      const connection = navigator.connection;\n      if (connection.effectiveType === 'slow-2g' || connection.effectiveType === '2g') {\n        score += 2;\n        factors.push('Slow connection');\n      } else if (connection.effectiveType === '3g') {\n        score += 1;\n        factors.push('Medium connection');\n      }\n    }\n\n    // Check if device is mobile\n    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n    if (isMobile) {\n      score += 1;\n      factors.push('Mobile device');\n    }\n\n    // Check battery level (if available)\n    if (navigator.getBattery) {\n      navigator.getBattery().then(battery => {\n        if (battery.level < 0.2) {\n          score += 1;\n          factors.push('Low battery');\n        }\n      }).catch(() => {});\n    }\n\n    // Performance timing check\n    if (performance && performance.timing) {\n      const timing = performance.timing;\n      const loadTime = timing.loadEventEnd - timing.navigationStart;\n      if (loadTime > 3000) {\n        score += 1;\n        factors.push('Slow page load');\n      }\n    }\n    this.isLowPerformance = score >= 3;\n    if (process.env.NODE_ENV === 'development') {\n      console.log('Performance Detection:', {\n        score,\n        factors,\n        isLowPerformance: this.isLowPerformance,\n        adminFallbackEnabled: this.adminFallbackEnabled\n      });\n    }\n    return this.isLowPerformance;\n  }\n\n  /**\n   * Should use fallback mode (static instead of animated)\n   */\n  shouldUseFallback() {\n    return this.adminFallbackEnabled || this.detectLowPerformance();\n  }\n\n  /**\n   * Perform a simple animation performance test\n   */\n  async testAnimationPerformance() {\n    return new Promise(resolve => {\n      const testElement = document.createElement('div');\n      testElement.style.cssText = `\n        position: fixed;\n        top: -100px;\n        left: -100px;\n        width: 50px;\n        height: 50px;\n        background: red;\n        transition: transform 0.1s;\n      `;\n      document.body.appendChild(testElement);\n      let frameCount = 0;\n      const startTime = performance.now();\n      const animate = () => {\n        frameCount++;\n        testElement.style.transform = `rotate(${frameCount * 10}deg)`;\n        if (frameCount < 60) {\n          requestAnimationFrame(animate);\n        } else {\n          const endTime = performance.now();\n          const duration = endTime - startTime;\n          const fps = frameCount / duration * 1000;\n          document.body.removeChild(testElement);\n\n          // If FPS is below 30, consider it low performance\n          resolve(fps < 30);\n        }\n      };\n      requestAnimationFrame(animate);\n    });\n  }\n}\n\n// Create singleton instance\nconst performanceDetector = new PerformanceDetector();\nexport default performanceDetector;\n\n// Export utility functions\nexport const shouldUseFallback = () => performanceDetector.shouldUseFallback();\nexport const setAdminFallback = enabled => performanceDetector.setAdminFallbackSetting(enabled);\nexport const getAdminFallback = () => performanceDetector.getAdminFallbackSetting();\nexport const testAnimationPerformance = () => performanceDetector.testAnimationPerformance();","map":{"version":3,"names":["PerformanceDetector","constructor","isLowPerformance","adminFallbackEnabled","getAdminFallbackSetting","setting","localStorage","getItem","setAdminFallbackSetting","enabled","setItem","toString","detectLowPerformance","score","factors","navigator","hardwareConcurrency","push","deviceMemory","connection","effectiveType","isMobile","test","userAgent","getBattery","then","battery","level","catch","performance","timing","loadTime","loadEventEnd","navigationStart","process","env","NODE_ENV","console","log","shouldUseFallback","testAnimationPerformance","Promise","resolve","testElement","document","createElement","style","cssText","body","appendChild","frameCount","startTime","now","animate","transform","requestAnimationFrame","endTime","duration","fps","removeChild","performanceDetector","setAdminFallback","getAdminFallback"],"sources":["C:/Users/ADMIN/Desktop/Mining Trade Finance/frontend/src/utils/performanceDetection.js"],"sourcesContent":["/**\n * Performance Detection Utility\n * Detects device performance capabilities for UI optimization\n */\n\nclass PerformanceDetector {\n  constructor() {\n    this.isLowPerformance = null;\n    this.adminFallbackEnabled = this.getAdminFallbackSetting();\n  }\n\n  /**\n   * Get admin fallback setting from localStorage\n   */\n  getAdminFallbackSetting() {\n    try {\n      const setting = localStorage.getItem('admin_animation_fallback');\n      return setting === 'true';\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * Set admin fallback setting\n   */\n  setAdminFallbackSetting(enabled) {\n    try {\n      localStorage.setItem('admin_animation_fallback', enabled.toString());\n      this.adminFallbackEnabled = enabled;\n    } catch {\n      // Silently fail if localStorage is not available\n    }\n  }\n\n  /**\n   * Detect if device has low performance capabilities\n   */\n  detectLowPerformance() {\n    if (this.isLowPerformance !== null) {\n      return this.isLowPerformance;\n    }\n\n    let score = 0;\n    const factors = [];\n\n    // Check hardware concurrency (CPU cores)\n    if (navigator.hardwareConcurrency) {\n      if (navigator.hardwareConcurrency <= 2) {\n        score += 2;\n        factors.push('Low CPU cores');\n      } else if (navigator.hardwareConcurrency <= 4) {\n        score += 1;\n        factors.push('Medium CPU cores');\n      }\n    }\n\n    // Check device memory (if available)\n    if (navigator.deviceMemory) {\n      if (navigator.deviceMemory <= 2) {\n        score += 2;\n        factors.push('Low RAM');\n      } else if (navigator.deviceMemory <= 4) {\n        score += 1;\n        factors.push('Medium RAM');\n      }\n    }\n\n    // Check connection speed\n    if (navigator.connection) {\n      const connection = navigator.connection;\n      if (connection.effectiveType === 'slow-2g' || connection.effectiveType === '2g') {\n        score += 2;\n        factors.push('Slow connection');\n      } else if (connection.effectiveType === '3g') {\n        score += 1;\n        factors.push('Medium connection');\n      }\n    }\n\n    // Check if device is mobile\n    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n      navigator.userAgent\n    );\n    if (isMobile) {\n      score += 1;\n      factors.push('Mobile device');\n    }\n\n    // Check battery level (if available)\n    if (navigator.getBattery) {\n      navigator.getBattery().then(battery => {\n        if (battery.level < 0.2) {\n          score += 1;\n          factors.push('Low battery');\n        }\n      }).catch(() => {});\n    }\n\n    // Performance timing check\n    if (performance && performance.timing) {\n      const timing = performance.timing;\n      const loadTime = timing.loadEventEnd - timing.navigationStart;\n      if (loadTime > 3000) {\n        score += 1;\n        factors.push('Slow page load');\n      }\n    }\n\n    this.isLowPerformance = score >= 3;\n    \n    if (process.env.NODE_ENV === 'development') {\n      console.log('Performance Detection:', {\n        score,\n        factors,\n        isLowPerformance: this.isLowPerformance,\n        adminFallbackEnabled: this.adminFallbackEnabled\n      });\n    }\n\n    return this.isLowPerformance;\n  }\n\n  /**\n   * Should use fallback mode (static instead of animated)\n   */\n  shouldUseFallback() {\n    return this.adminFallbackEnabled || this.detectLowPerformance();\n  }\n\n  /**\n   * Perform a simple animation performance test\n   */\n  async testAnimationPerformance() {\n    return new Promise((resolve) => {\n      const testElement = document.createElement('div');\n      testElement.style.cssText = `\n        position: fixed;\n        top: -100px;\n        left: -100px;\n        width: 50px;\n        height: 50px;\n        background: red;\n        transition: transform 0.1s;\n      `;\n      \n      document.body.appendChild(testElement);\n      \n      let frameCount = 0;\n      const startTime = performance.now();\n      \n      const animate = () => {\n        frameCount++;\n        testElement.style.transform = `rotate(${frameCount * 10}deg)`;\n        \n        if (frameCount < 60) {\n          requestAnimationFrame(animate);\n        } else {\n          const endTime = performance.now();\n          const duration = endTime - startTime;\n          const fps = (frameCount / duration) * 1000;\n          \n          document.body.removeChild(testElement);\n          \n          // If FPS is below 30, consider it low performance\n          resolve(fps < 30);\n        }\n      };\n      \n      requestAnimationFrame(animate);\n    });\n  }\n}\n\n// Create singleton instance\nconst performanceDetector = new PerformanceDetector();\n\nexport default performanceDetector;\n\n// Export utility functions\nexport const shouldUseFallback = () => performanceDetector.shouldUseFallback();\nexport const setAdminFallback = (enabled) => performanceDetector.setAdminFallbackSetting(enabled);\nexport const getAdminFallback = () => performanceDetector.getAdminFallbackSetting();\nexport const testAnimationPerformance = () => performanceDetector.testAnimationPerformance();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}